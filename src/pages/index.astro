---
import Home from "../layouts/Home.astro";
import Masonry from "../components/Masonry.astro";
import Post from "../components/Post.astro";

const posts = await Astro.glob("../posts/*.{md,mdx}");

// Sort posts by frontmatter date (newest first)
const sortedPosts = posts.sort((a, b) => {
  const dateA = a.frontmatter?.date ? new Date(a.frontmatter.date) : new Date(0);
  const dateB = b.frontmatter?.date ? new Date(b.frontmatter.date) : new Date(0);
  return dateB.getTime() - dateA.getTime();
});
---

<Home>
  <Masonry>
    {
      sortedPosts.map((post) => {
        const Content = post.Content;
        return (
          <Post>
            <Content />
          </Post>
        );
      })
    }
  </Masonry>
</Home>
